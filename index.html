<!doctype html>
<html lang="fa" dir="rtl">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HR Bot</title>

  <link href="https://cdn.jsdelivr.net/npm/@n8n/chat/dist/style.css" rel="stylesheet" />
  <link href="./style.css" rel="stylesheet" />
</head>

<body>
  <!-- Theme Toggle -->
  <button id="themeToggle" class="theme-toggle" type="button" aria-label="Toggle theme">
    ðŸŒ™
  </button>

  <div id="n8n-chat"></div>

  <script type="module">
    import { createChat } from 'https://cdn.jsdelivr.net/npm/@n8n/chat/dist/chat.bundle.es.js';

    createChat({
      webhookUrl: 'https://moshaver71.app.n8n.cloud/webhook/151b877a-8cfd-4390-a80a-dc5982c603ce/chat',
      target: '#n8n-chat',
      mode: 'fullscreen',
      defaultLanguage: 'fa',
	initialMessages: [
		'Hi there! ðŸ‘‹',
		'My name is Nathan. How can I assist you today?'
	],
      i18n: {
        en: {
          title: 'Hi there! ðŸ‘‹',
          subtitle: "Start a chat. We're here to help you 24/7.",
          footer: '',
          getStarted: 'New Conversation',
          inputPlaceholder: 'Type your question..',
        },
        fa: {
          title: 'Shirin Vatan',
          subtitle: "Ù…Ù† Ø±Ø¨Ø§Øª Ø¯Ø³ØªÛŒØ§Ø± ÙˆØ·Ù† Ù‡Ø³ØªÙ… Ú†Ù‡ Ú©Ù…Ú©ÛŒ Ù…ÛŒ ØªÙˆÙ†Ù… Ø¨Ø±Ø§ØªÙˆÙ† Ø§Ù†Ø¬Ø§Ù…ØŸ",
          footer: '',
          getStarted: 'Ú¯ÙØªÚ¯ÙˆÛŒ Ø¬Ø¯ÛŒØ¯',
          inputPlaceholder: 'Ø³ÙˆØ§Ù„ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù¾Ø±Ø³ÛŒØ¯',
        },
      },
    });

    // Theme init
    const saved = localStorage.getItem('hrbot_theme');
    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    const initial = saved || (prefersDark ? 'dark' : 'light');
    document.documentElement.setAttribute('data-theme', initial);

    const btn = document.getElementById('themeToggle');
    const syncIcon = () => {
      const t = document.documentElement.getAttribute('data-theme');
      btn.textContent = t === 'dark' ? 'â˜€ï¸' : 'ðŸŒ™';
      btn.title = t === 'dark' ? 'Ø­Ø§Ù„Øª Ø±ÙˆØ´Ù†' : 'Ø­Ø§Ù„Øª ØªØ§Ø±ÛŒÚ©';
    };
    syncIcon();

    btn.addEventListener('click', () => {
      const t = document.documentElement.getAttribute('data-theme');
      const next = t === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', next);
      localStorage.setItem('hrbot_theme', next);
      syncIcon();
    });
  </script>
</body>

</html>